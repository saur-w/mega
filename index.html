<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tavares e Agregados - Mega da Virada 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
</head>
<body class="bg-gradient-to-br from-green-900 via-green-800 to-emerald-900 min-h-screen p-4">
    <div id="root"></div>
    
    <script>
    const { useState, useEffect, createElement: e } = React;
    const { createRoot } = ReactDOM;

    const SUPABASE_URL = 'https://pyhkhudqlbimkowvqtxe.supabase.co'; 
    const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB5aGtodWRxbGJpbWtvd3ZxdHhlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY5NTQxMzIsImV4cCI6MjA4MjUzMDEzMn0.ifgPFlRb9LHZHq3_H2sHMPY7wSpvRXDtaJikI0U86eE';
    const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    const SENHA_ACESSO = '2025';
    const VALOR_TOTAL_BOLAO = 840.00;
    const PARTICIPANTES_INICIAIS = [
        { id: 1, nome: "Sara Santana", cotas: 3, valorPago: 45.00, numeros: [] },
        { id: 2, nome: "Cida Regoso", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 3, nome: "Paula & Mion", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 4, nome: "Bia Rowies", cotas: 1, valorPago: 15.00, numeros: [] },
        { id: 5, nome: "Carolzinha Bonitatibus", cotas: 1, valorPago: 15.00, numeros: [] },
        { id: 6, nome: "Cris Rowies", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 7, nome: "Malu Souto", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 8, nome: "Jose Vicente", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 9, nome: "Rosely Ber", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 10, nome: "Juliana Regoso", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 11, nome: "Julia Rowies", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 12, nome: "Cida Pires", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 13, nome: "Ju & Anna", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 14, nome: "Mariana Granha", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 15, nome: "Marcia Teixeira", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 16, nome: "Mariana & Marcellus", cotas: 4, valorPago: 60.00, numeros: [] },
        { id: 17, nome: "Ricardo Granha", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 18, nome: "Cecilia & SÃ©rgio", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 19, nome: "Adriana", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 20, nome: "AndrÃ© & Ju", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 21, nome: "Estela Souto", cotas: 4, valorPago: 60.00, numeros: [] },
        { id: 22, nome: "Fatima", cotas: 1, valorPago: 15.00, numeros: [] },
        { id: 23, nome: "Leticia", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 24, nome: "Marcus & Gabs", cotas: 4, valorPago: 60.00, numeros: [] },
        { id: 25, nome: "Alana & Pedro", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 26, nome: "Erica & William", cotas: 2, valorPago: 30.00, numeros: [] },
    ];
    
    function App() {
        const [logado, setLogado] = useState(false);
        const [senhaInput, setSenhaInput] = useState('');
        const [pagina, setPagina] = useState('home');
        const [participantes, setParticipantes] = useState([]);
        const [participanteSelecionado, setParticipanteSelecionado] = useState(null);
        const [numerosEscolhidos, setNumerosEscolhidos] = useState([]);
        const [estrategia, setEstrategia] = useState('hibrida-b');
        const [apostas, setApostas] = useState([]);
        const [aprovacoes, setAprovacoes] = useState([]);
        const [nomeAprovacao, setNomeAprovacao] = useState('');
        const [sugestoes, setSugestoes] = useState([]);
        const [novaSugestao, setNovaSugestao] = useState('');
        
        // Novos estados para conferÃªncia
        const [numerosSorteados, setNumerosSorteados] = useState([]);
        const [resultados, setResultados] = useState(null);

        const carregarDados = async () => {
            try {
                const { data, error } = await supabaseClient
                    .from('bolao_data')
                    .select('content')
                    .eq('id', 'estado_geral')
                    .single();
                
                if (error && error.code !== 'PGRST116') {
                    console.error("Erro ao carregar:", error);
                }
                
                if (data?.content) {
                    const c = data.content;
                    setParticipantes(c.participantes || PARTICIPANTES_INICIAIS);
                    setApostas(c.apostas || []);
                    setEstrategia(c.estrategia || 'hibrida-b');
                    setAprovacoes(c.aprovacoes || []);
                    setSugestoes(c.sugestoes || []);
                    setNumerosSorteados(c.numerosSorteados || []);
                } else {
                    setParticipantes(PARTICIPANTES_INICIAIS);
                }
            } catch (err) {
                console.error("Erro catch:", err);
                setParticipantes(PARTICIPANTES_INICIAIS);
            }
        };

        useEffect(() => {
            carregarDados();
            const interval = setInterval(carregarDados, 5000);
            return () => clearInterval(interval);
        }, []);

        const syncSnapshot = async (overrides = {}) => {
            const snapshot = {
                participantes, apostas, estrategia, aprovacoes, sugestoes, numerosSorteados,
                ...overrides
            };
            
            try {
                const { error } = await supabaseClient
                    .from('bolao_data')
                    .upsert({ 
                        id: 'estado_geral', 
                        content: snapshot,
                        updated_at: new Date().toISOString()
                    });
                
                if (error) {
                    console.error("Erro sync:", error);
                    return false;
                }
                return true;
            } catch (err) {
                console.error("Erro catch sync:", err);
                return false;
            }
        };
        
        const fazerLogin = () => senhaInput === SENHA_ACESSO ? setLogado(true) : alert('Senha incorreta!');
        
        const abrirEscolhaNumeros = (p) => { 
            setParticipanteSelecionado(p); 
            setNumerosEscolhidos(p.numeros || []); 
        };

        const salvarNumeros = async () => {
            if (numerosEscolhidos.length === 0) return alert('Escolha pelo menos 1 nÃºmero!');
            
            const novosParticipantes = participantes.map(p => 
                p.id === participanteSelecionado.id ? {...p, numeros: numerosEscolhidos} : p
            );

            const sucesso = await syncSnapshot({ participantes: novosParticipantes });
            
            if (sucesso) {
                setParticipantes(novosParticipantes);
                alert('NÃºmeros salvos! âœ…');
                setParticipanteSelecionado(null);
                setNumerosEscolhidos([]);
            } else {
                alert('Erro ao salvar. Tente novamente.');
            }
        };

        const toggleNumero = (num) => {
            if (numerosEscolhidos.includes(num)) setNumerosEscolhidos(numerosEscolhidos.filter(n => n !== num));
            else if (numerosEscolhidos.length < 6) setNumerosEscolhidos([...numerosEscolhidos, num].sort((a,b) => a-b));
        };

        const toggleNumeroSorteado = (num) => {
            if (numerosSorteados.includes(num)) {
                setNumerosSorteados(numerosSorteados.filter(n => n !== num));
            } else if (numerosSorteados.length < 6) {
                setNumerosSorteados([...numerosSorteados, num].sort((a,b) => a-b));
            }
        };

        const conferirResultado = async () => {
            if (numerosSorteados.length !== 6) {
                return alert('Selecione exatamente 6 nÃºmeros sorteados!');
            }

            const resultadosProcessados = apostas.map((aposta, idx) => {
                const acertos = aposta.nums.filter(n => numerosSorteados.includes(n)).length;
                let premio = '';
                if (acertos === 6) premio = 'SENA';
                else if (acertos === 5) premio = 'QUINA';
                else if (acertos === 4) premio = 'QUADRA';
                
                return {
                    numero: idx + 1,
                    tipo: aposta.tipo,
                    numeros: aposta.nums,
                    acertos,
                    premio
                };
            });

            setResultados(resultadosProcessados);
            await syncSnapshot({ numerosSorteados });
        };

        const limparConferencia = async () => {
            setNumerosSorteados([]);
            setResultados(null);
            await syncSnapshot({ numerosSorteados: [] });
        };

        const todosNumeros = () => {
            const nums = [];
            participantes.forEach(p => p.numeros && nums.push(...p.numeros));
            return [...new Set(nums)].sort((a,b) => a-b);
        };

        const gerarApostas = async () => {
            const pool = todosNumeros();
            if (pool.length < 6) return alert('MÃ­nimo 6 nÃºmeros!');
            const resultado = [];
            const sortear = (qt) => {
                const nums = [], temp = [...pool];
                while (nums.length < qt && temp.length > 0) {
                    const i = Math.floor(Math.random() * temp.length);
                    nums.push(temp[i]);
                    temp.splice(i, 1);
                }
                while (nums.length < qt) {
                    const n = Math.floor(Math.random() * 60) + 1;
                    if (!nums.includes(n)) nums.push(n);
                }
                return nums.sort((a,b) => a-b);
            };
            if (estrategia === 'hibrida-a') {
                resultado.push({tipo: '9 nÃºmeros', nums: sortear(9), custo: 252});
                resultado.push({tipo: '7 nÃºmeros', nums: sortear(7), custo: 35}, {tipo: '7 nÃºmeros', nums: sortear(7), custo: 35});
                for (let i=0; i<10; i++) resultado.push({tipo: '6 nÃºmeros', nums: sortear(6), custo: 5});
            } else {
                resultado.push({tipo: '9 nÃºmeros', nums: sortear(9), custo: 252});
                for (let i=0; i<5; i++) resultado.push({tipo: '7 nÃºmeros', nums: sortear(7), custo: 35});
                for (let i=0; i<16; i++) resultado.push({tipo: '6 nÃºmeros', nums: sortear(6), custo: 5});
            }
            
            const sucesso = await syncSnapshot({ apostas: resultado, estrategia });
            if (sucesso) {
                setApostas(resultado);
                alert('Apostas geradas! âœ…');
            }
        };

        const aprovar = async () => {
            if (!nomeAprovacao.trim()) return alert('Digite seu nome!');
            if (aprovacoes.includes(nomeAprovacao.trim())) return alert('VocÃª jÃ¡ aprovou!');
            const novas = [...aprovacoes, nomeAprovacao.trim()];
            
            const sucesso = await syncSnapshot({ aprovacoes: novas });
            if (sucesso) {
                setAprovacoes(novas);
                setNomeAprovacao('');
                alert('AprovaÃ§Ã£o registrada! âœ…');
            }
        };

        const adicionarSugestao = async () => {
            if (!novaSugestao.trim()) return alert('Digite uma sugestÃ£o!');
            const nome = prompt('Seu nome:');
            if (!nome) return;
            const nova = {nome, sugestao: novaSugestao, data: new Date().toLocaleString()};
            const novas = [...sugestoes, nova];
            
            const sucesso = await syncSnapshot({ sugestoes: novas });
            if (sucesso) {
                setSugestoes(novas);
                setNovaSugestao('');
                alert('SugestÃ£o enviada! âœ…');
            }
        };

        const exportar = () => {
            let txt = 'â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n  TAVARES E AGREGADOS - MEGA DA VIRADA 2025\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n';
            txt += `VALOR TOTAL: R$ ${VALOR_TOTAL_BOLAO.toFixed(2)}\nESTRATÃ‰GIA: ${estrategia === 'hibrida-a' ? 'OpÃ§Ã£o A (R$ 648)' : 'OpÃ§Ã£o B (R$ 810)'}\n\nPARTICIPANTES:\n`;
            participantes.forEach((p, i) => {
                txt += `${String(i+1).padStart(2, '0')}. ${p.nome} | ${p.cotas} cota(s) | R$ ${p.valorPago.toFixed(2)}\n    NÃºmeros: ${p.numeros?.length > 0 ? p.numeros.join(', ') : 'NÃ£o escolheu'}\n`;
            });
            txt += '\nAPOSTAS:\n';
            apostas.forEach((a, i) => txt += `${String(i+1).padStart(3, '0')}. [${a.tipo}] ${a.nums.map(n => String(n).padStart(2,'0')).join('-')}\n`);
            
            if (resultados) {
                txt += '\n\nRESULTADO DO SORTEIO:\n';
                txt += `NÃºmeros sorteados: ${numerosSorteados.map(n => String(n).padStart(2,'0')).join('-')}\n\n`;
                const premios = resultados.filter(r => r.premio);
                if (premios.length > 0) {
                    txt += 'JOGOS PREMIADOS:\n';
                    premios.forEach(p => {
                        txt += `Jogo #${String(p.numero).padStart(3,'0')} - ${p.premio} (${p.acertos} acertos)\n`;
                        txt += `NÃºmeros: ${p.numeros.map(n => String(n).padStart(2,'0')).join('-')}\n\n`;
                    });
                } else {
                    txt += 'Nenhum prÃªmio desta vez. Boa sorte na prÃ³xima!\n';
                }
            }
            
            const blob = new Blob([txt], {type: 'text/plain;charset=utf-8'});
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'tavares-mega-2025.txt';
            link.click();
        };

        if (!logado) {
            return e('div', { className: 'max-w-md mx-auto mt-20' },
                e('div', { className: 'bg-white rounded-xl p-8 shadow-2xl' },
                    e('div', { className: 'text-center mb-6' },
                        e('div', { className: 'text-6xl mb-4' }, 'ðŸŽ°'),
                        e('h1', { className: 'text-2xl font-bold text-green-900 mb-1' }, 'Tavares e Agregados'),
                        e('h2', { className: 'text-xl font-bold text-green-700 mb-2' }, 'Mega da Virada 2025')
                    ),
                    e('div', { className: 'mb-6' },
                        e('label', { className: 'block font-bold mb-2' }, 'Senha:'),
                        e('input', {
                            type: 'password',
                            value: senhaInput,
                            onChange: ev => setSenhaInput(ev.target.value),
                            onKeyPress: ev => ev.key === 'Enter' && fazerLogin(),
                            placeholder: 'Digite a senha',
                            className: 'w-full p-4 border-2 rounded-lg text-lg focus:border-green-600 outline-none'
                        })
                    ),
                    e('button', {
                        onClick: fazerLogin,
                        className: 'w-full bg-green-600 hover:bg-green-700 text-white font-bold py-4 rounded-lg text-lg'
                    }, 'ðŸ”“ Entrar')
                )
            );
        }
        
        if (participanteSelecionado) {
            return e('div', { className: 'max-w-4xl mx-auto' },
                e('button', {
                    onClick: () => { setParticipanteSelecionado(null); setNumerosEscolhidos([]); },
                    className: 'text-white mb-4'
                }, 'â¬…ï¸ Voltar'),
                e('div', { className: 'bg-white rounded-xl p-6' },
                    e('h2', { className: 'text-2xl font-bold text-green-900 mb-1 text-center' }, participanteSelecionado.nome),
                    e('p', { className: 'text-center text-gray-600 mb-6' }, 
                        `${participanteSelecionado.cotas} cota(s) â€¢ R$ ${participanteSelecionado.valorPago.toFixed(2)}`
                    ),
                    e('div', { className: 'mb-6' },
                        e('label', { className: 'block font-bold mb-2' },
                            'Escolha atÃ© 6 nÃºmeros: ',
                            e('span', { className: 'text-green-600' }, `${numerosEscolhidos.length}/6`)
                        ),
                        numerosEscolhidos.length > 0 && e('div', { className: 'mb-3 flex gap-2 flex-wrap' },
                            numerosEscolhidos.map(n => e('span', {
                                key: n,
                                className: 'bg-green-600 text-white px-4 py-2 rounded-full font-bold'
                            }, String(n).padStart(2, '0')))
                        ),
                        e('div', { className: 'grid grid-cols-10 gap-2' },
                            Array.from({length: 60}, (_, i) => i+1).map(num =>
                                e('button', {
                                    key: num,
                                    onClick: () => toggleNumero(num),
                                    className: `aspect-square rounded-lg font-bold transition ${numerosEscolhidos.includes(num) ? 'bg-green-600 text-white scale-110' : 'bg-gray-100 hover:bg-gray-200'}`
                                }, num)
                            )
                        )
                    ),
                    e('button', {
                        onClick: salvarNumeros,
                        disabled: numerosEscolhidos.length === 0,
                        className: 'w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white font-bold py-4 rounded-lg'
                    }, 'âœ… Salvar')
                )
            );
        }
        
        if (pagina === 'home') {
            const totalComNumeros = participantes.filter(p => p.numeros?.length > 0).length;
            return e('div', { className: 'max-w-6xl mx-auto' },
                e('div', { className: 'text-center mb-6 text-white' },
                    e('h1', { className: 'text-4xl font-bold mb-2' }, 'ðŸŽ° Tavares e Agregados ðŸŽ°'),
                    e('h2', { className: 'text-2xl font-bold mb-3' }, 'Mega da Virada 2025'),
                    e('div', { className: 'inline-block bg-yellow-400 text-green-900 px-6 py-3 rounded-full font-bold text-xl' },
                        `R$ ${VALOR_TOTAL_BOLAO.toFixed(2)}`
                    )
                ),
                e('div', { className: 'grid md:grid-cols-3 gap-4 mb-6' },
                    e('div', { className: 'bg-white rounded-lg p-4 text-center' },
                        e('p', { className: 'text-3xl font-bold text-green-900' }, participantes.length),
                        e('p', { className: 'text-sm' }, 'Participantes')
                    ),
                    e('div', { className: 'bg-white rounded-lg p-4 text-center' },
                        e('p', { className: 'text-3xl font-bold text-blue-900' }, `${totalComNumeros}/${participantes.length}`),
                        e('p', { className: 'text-sm' }, 'Escolheram')
                    ),
                    e('div', { className: 'bg-white rounded-lg p-4 text-center' },
                        e('p', { className: 'text-3xl font-bold text-purple-900' }, apostas.length),
                        e('p', { className: 'text-sm' }, 'Jogos')
                    )
                ),
                e('div', { className: 'bg-white rounded-xl p-6 mb-6' },
                    e('h3', { className: 'text-2xl font-bold mb-4' }, 'ðŸ‘¥ Participantes'),
                    e('div', { className: 'grid md:grid-cols-2 gap-3 max-h-96 overflow-y-auto' },
                        participantes.map(p =>
                            e('div', {
                                key: p.id,
                                className: 'border-2 border-green-200 rounded-lg p-4 bg-green-50'
                            },
                                e('div', { className: 'flex justify-between items-start mb-3' },
                                    e('div', { className: 'flex-1' },
                                        e('h4', { className: 'font-bold text-lg' }, p.nome),
                                        e('p', { className: 'text-sm text-gray-600' }, 
                                            `${p.cotas} cota(s) â€¢ R$ ${p.valorPago.toFixed(2)}`
                                        )
                                    ),
                                    e('button', {
                                        onClick: () => abrirEscolhaNumeros(p),
                                        className: 'bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-bold text-sm ml-2'
                                    }, p.numeros?.length > 0 ? 'âœï¸' : 'âž•')
                                ),
                                p.numeros?.length > 0
                                    ? e('div', { className: 'flex gap-1 flex-wrap' },
                                        p.numeros.map(n =>
                                            e('span', {
                                                key: n,
                                                className: 'bg-green-600 text-white w-8 h-8 flex items-center justify-center rounded-full text-xs font-bold'
                                            }, String(n).padStart(2, '0'))
                                        )
                                    )
                                    : e('p', { className: 'text-sm text-gray-500 italic' }, 'Aguardando')
                            )
                        )
                    )
                ),
                e('div', { className: 'grid md:grid-cols-2 gap-4' },
                    e('button', {
                        onClick: () => setPagina('consulta'),
                        className: 'bg-white rounded-xl p-6 shadow-xl'
                    },
                        e('div', { className: 'text-5xl mb-3' }, 'ðŸŽ°'),
                        e('h3', { className: 'text-xl font-bold text-blue-900' }, 'Ver Jogos')
                    ),
                    e('button', {
                        onClick: () => setPagina('admin'),
                        className: 'bg-white rounded-xl p-6 shadow-xl'
                    },
                        e('div', { className: 'text-5xl mb-3' }, 'ðŸ’¡'),
                        e('h3', { className: 'text-xl font-bold text-purple-900' }, 'EstratÃ©gias')
                    )
                )
            );
        }
        
        if (pagina === 'consulta') {
            const senas = resultados?.filter(r => r.premio === 'SENA').length || 0;
            const quinas = resultados?.filter(r => r.premio === 'QUINA').length || 0;
            const quadras = resultados?.filter(r => r.premio === 'QUADRA').length || 0;
            
            return e('div', { className: 'max-w-6xl mx-auto' },
                e('button', {
                    onClick: () => setPagina('home'),
                    className: 'text-white mb-4'
                }, 'â¬…ï¸ Voltar'),
                e('div', { className: 'bg-white rounded-xl p-6' },
                    e('h2', { className: 'text-3xl font-bold text-center mb-6' }, 'ðŸŽ° Jogos'),
                    
                    apostas.length === 0
                        ? e('div', { className: 'text-center py-12' },
                            e('div', { className: 'text-6xl mb-4' }, 'â³'),
                            e('h3', { className: 'text-2xl font-bold' }, 'Aguardando')
                        )
                        : e('div', null,
                            // SeÃ§Ã£o de conferÃªncia
                            e('div', { className: 'bg-yellow-50 border-2 border-yellow-400 rounded-lg p-6 mb-6' },
                                e('h3', { className: 'font-bold text-xl mb-4 text-center' }, 'ðŸŽ¯ Conferir Resultado'),
                                numerosSorteados.length > 0 && e('div', { className: 'mb-4 flex gap-2 flex-wrap justify-center' },
                                    numerosSorteados.map(n => e('span', {
                                        key: n,
                                        className: 'bg-yellow-500 text-white px-6 py-3 rounded-full font-bold text-xl'
                                    }, String(n).padStart(2, '0')))
                                ),
                                e('label', { className: 'block font-bold mb-3 text-center' },
                                    `Selecione os 6 nÃºmeros sorteados: ${numerosSorteados.length}/6`
                                ),
                                e('div', { className: 'grid grid-cols-10 gap-2 mb-4' },
                                    Array.from({length: 60}, (_, i) => i+1).map(num =>
                                        e('button', {
                                            key: num,
                                            onClick: () => toggleNumeroSorteado(num),
                                            className: `aspect-square rounded-lg font-bold transition ${numerosSorteados.includes(num) ? 'bg-yellow-500 text-white scale-110' : 'bg-gray-100 hover:bg-gray-200'}`
                                        }, num)
                                    )
                                ),
                                e('div', { className: 'flex gap-2' },
                                    e('button', {
                                        onClick: conferirResultado,
                                        disabled: numerosSorteados.length !== 6,
                                        className: 'flex-1 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white font-bold py-4 rounded-lg'
                                    }, 'âœ… Conferir'),
                                    e('button', {
                                        onClick: limparConferencia,
                                        className: 'bg-red-600 hover:bg-red-700 text-white font-bold py-4 px-6 rounded-lg'
                                    }, 'ðŸ—‘ï¸')
                                )
                            ),
                            
                            // Resultados da conferÃªncia
                            resultados && e('div', { className: 'mb-6' },
                                e('div', { className: 'grid grid-cols-3 gap-4 mb-6' },
                                    e('div', { className: 'bg-green-100 border-2 border-green-500 rounded-lg p-4 text-center' },
                                        e('p', { className: 'text-4xl font-bold text-green-700' }, senas),
                                        e('p', { className: 'text-sm font-bold' }, 'SENA')
                                    ),
                                    e('div', { className: 'bg-blue-100 border-2 border-blue-500 rounded-lg p-4 text-center' },
                                        e('p', { className: 'text-4xl font-bold text-blue-700' }, quinas),
                                        e('p', { className: 'text-sm font-bold' }, 'QUINA')
                                    ),
                                    e('div', { className: 'bg-purple-100 border-2 border-purple-500 rounded-lg p-4 text-center' },
                                        e('p', { className: 'text-4xl font-bold text-purple-700' }, quadras),
                                        e('p', { className: 'text-sm font-bold' }, 'QUADRA')
                                    )
                                )
                            ),
                            
                            // Lista de jogos
                            e('div', { className: 'mb-6' },
                                e('h3', { className: 'font-bold text-xl mb-4' }, 
                                    resultados ? 'Resultados Detalhados:' : 'Todos os Jogos:'
                                ),
                                e('div', { className: 'grid md:grid-cols-3 gap-3 max-h-96 overflow-y-auto' },
                                    (resultados || apostas).map((item, i) => {
                                        const a = resultados ? item : item;
                                        const nums = resultados ? item.numeros : item.nums;
                                        
                                        let bgColor = 'bg-green-50';
                                        let borderColor = 'border-gray-200';
                                        
                                        if (resultados) {
                                            if (item.premio === 'SENA') { bgColor = 'bg-green-50'; borderColor = 'border-green-500'; }
                                            else if (item.premio === 'QUINA') { bgColor = 'bg-blue-50'; borderColor = 'border-blue-500'; }
                                            else if (item.premio === 'QUADRA') { bgColor = 'bg-purple-50'; borderColor = 'border-purple-500'; }
                                        }
                                        
                                        return e('div', {
                                            key: i,
                                            className: `${bgColor} border-2 ${borderColor} p-3 rounded-lg`
                                        },
                                            e('div', { className: 'flex justify-between text-xs mb-2' },
                                                e('span', null, `#${i+1}`),
                                                e('div', { className: 'flex gap-2 items-center' },
                                                    e('span', { className: 'font-bold' }, resultados ? item.tipo : a.tipo),
                                                    resultados && item.premio && e('span', { 
                                                        className: `px-2 py-0.5 rounded-full font-bold text-xs ${
                                                            item.premio === 'SENA' ? 'bg-green-600' :
                                                            item.premio === 'QUINA' ? 'bg-blue-600' : 'bg-purple-600'
                                                        } text-white`
                                                    }, item.premio)
                                                )
                                            ),
                                            resultados && e('p', { className: 'text-xs text-center mb-2 font-bold' },
                                                `${item.acertos} acertos`
                                            ),
                                            e('div', { className: 'flex gap-1 flex-wrap justify-center' },
                                                nums.map((n, j) =>
                                                    e('span', {
                                                        key: j,
                                                        className: `w-7 h-7 flex items-center justify-center rounded-full text-xs font-bold ${
                                                            resultados && numerosSorteados.includes(n) 
                                                                ? 'bg-yellow-500 text-white' 
                                                                : 'bg-green-600 text-white'
                                                        }`
                                                    }, String(n).padStart(2, '0'))
                                                )
                                            )
                                        );
                                    })
                                )
                            ),
                            
                            // AprovaÃ§Ã£o
                            e('div', { className: 'bg-green-50 border-2 border-green-300 rounded-lg p-6' },
                                e('h3', { className: 'font-bold text-xl mb-4 text-center' }, 'âœ… Aprovar'),
                                aprovacoes.length > 0 && e('div', { className: 'mb-4' },
                                    e('p', { className: 'font-bold mb-2' }, `Aprovaram (${aprovacoes.length}):`),
                                    e('div', { className: 'flex flex-wrap gap-2' },
                                        aprovacoes.map((a, i) =>
                                            e('span', {
                                                key: i,
                                                className: 'bg-green-600 text-white px-3 py-1 rounded-full text-sm'
                                            }, `${a} âœ…`)
                                        )
                                    )
                                ),
                                e('div', { className: 'flex gap-2' },
                                    e('input', {
                                        type: 'text',
                                        value: nomeAprovacao,
                                        onChange: ev => setNomeAprovacao(ev.target.value),
                                        placeholder: 'Seu nome',
                                        className: 'flex-1 p-3 border-2 rounded-lg'
                                    }),
                                    e('button', {
                                        onClick: aprovar,
                                        className: 'bg-green-600 text-white px-6 py-3 rounded-lg font-bold'
                                    }, 'âœ…')
                                )
                            )
                        )
                )
            );
        }
        
        if (pagina === 'admin') {
            return e('div', { className: 'max-w-6xl mx-auto pb-8' },
                e('button', {
                    onClick: () => setPagina('home'),
                    className: 'text-white mb-4'
                }, 'â¬…ï¸ Voltar'),
                e('div', { className: 'bg-white rounded-xl p-6' },
                    e('h2', { className: 'text-3xl font-bold mb-6 text-center' }, 'ðŸ” Escolha a EstratÃ©gia'),
                    e('div', { className: 'grid md:grid-cols-2 gap-6 mb-6' },
                        e('button', {
                            onClick: () => setEstrategia('hibrida-a'),
                            className: `p-6 border-3 rounded-xl transition-all ${estrategia === 'hibrida-a' ? 'border-green-600 bg-green-50 shadow-lg' : 'border-gray-300'}`
                        },
                            e('div', { className: 'text-4xl mb-3' }, 'ðŸŽ¯'),
                            e('h3', { className: 'text-2xl font-bold text-green-900 mb-3' }, 'OpÃ§Ã£o A - HÃ­brida'),
                            e('div', { className: 'text-left bg-white p-4 rounded-lg mb-3' },
                                e('p', { className: 'text-sm font-bold mb-2' }, 'ComposiÃ§Ã£o:'),
                                e('ul', { className: 'text-sm space-y-1' },
                                    e('li', null, 'â€¢ 1 jogo de 9 nÃºmeros'),
                                    e('li', null, 'â€¢ 2 jogos de 7 nÃºmeros'),
                                    e('li', null, 'â€¢ 10 jogos simples')
                                )
                            ),
                            e('div', { className: 'bg-yellow-100 border-2 border-yellow-400 p-3 rounded-lg' },
                                e('p', { className: 'font-bold text-green-800' }, 'R$ 648,00'),
                                e('p', { className: 'text-sm text-green-700' }, 'Sobra R$ 162,00')
                            )
                        ),
                        e('button', {
                            onClick: () => setEstrategia('hibrida-b'),
                            className: `p-6 border-3 rounded-xl transition-all ${estrategia === 'hibrida-b' ? 'border-purple-600 bg-purple-50 shadow-lg' : 'border-gray-300'}`
                        },
                            e('div', { className: 'text-4xl mb-3' }, 'ðŸš€'),
                            e('h3', { className: 'text-2xl font-bold text-purple-900 mb-3' }, 'OpÃ§Ã£o B - PotÃªncia MÃ¡xima'),
                            e('div', { className: 'text-left bg-white p-4 rounded-lg mb-3' },
                                e('p', { className: 'text-sm font-bold mb-2' }, 'ComposiÃ§Ã£o:'),
                                e('ul', { className: 'text-sm space-y-1' },
                                    e('li', null, 'â€¢ 1 jogo de 9 nÃºmeros'),
                                    e('li', null, 'â€¢ 5 jogos de 7 nÃºmeros'),
                                    e('li', null, 'â€¢ 16 jogos simples')
                                )
                            ),
                            e('div', { className: 'bg-purple-100 border-2 border-purple-400 p-3 rounded-lg' },
                                e('p', { className: 'font-bold text-purple-800' }, 'R$ 810,00'),
                                e('p', { className: 'text-sm text-purple-700' }, 'Investimento total')
                            )
                        )
                    ),
                    e('div', { className: 'bg-blue-50 border-2 border-blue-300 rounded-lg p-4 mb-6' },
                        e('h4', { className: 'font-bold text-blue-900 mb-2' }, 'ðŸ’¡ Por que jogo de 9 nÃºmeros?'),
                        e('p', { className: 'text-sm text-blue-800' },
                            'Equivale a ',
                            e('strong', null, '84 apostas simples'),
                            '. Se acertarmos a Sena, ganhamos tambÃ©m vÃ¡rias Quinas e Quadras!'
                        )
                    ),
                    e('div', { className: 'bg-gray-50 border-2 border-gray-300 rounded-lg p-6 mb-6' },
                        e('h3', { className: 'text-xl font-bold mb-4' }, 'ðŸ’¬ SugestÃµes'),
                        e('div', { className: 'mb-4' },
                            e('textarea', {
                                value: novaSugestao,
                                onChange: ev => setNovaSugestao(ev.target.value),
                                placeholder: 'Sugira uma estratÃ©gia...',
                                className: 'w-full p-3 border-2 rounded-lg h-24 text-sm'
                            }),
                            e('button', {
                                onClick: adicionarSugestao,
                                className: 'mt-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-bold text-sm'
                            }, 'ðŸ“ Enviar')
                        ),
                        sugestoes.length > 0 && e('div', { className: 'space-y-2' },
                            e('p', { className: 'font-bold text-sm mb-2' }, `Recebidas (${sugestoes.length}):`),
                            sugestoes.map((s, i) =>
                                e('div', {
                                    key: i,
                                    className: 'bg-white p-3 rounded-lg border'
                                },
                                    e('div', { className: 'flex justify-between mb-1' },
                                        e('span', { className: 'font-bold text-sm' }, s.nome),
                                        e('span', { className: 'text-xs text-gray-500' }, s.data)
                                    ),
                                    e('p', { className: 'text-sm' }, s.sugestao)
                                )
                            )
                        )
                    ),
                    e('button', {
                        onClick: gerarApostas,
                        disabled: todosNumeros().length < 6,
                        className: 'w-full bg-purple-600 text-white font-bold py-4 rounded-lg mb-4 disabled:bg-gray-400 text-lg'
                    }, 'âœ¨ Gerar Apostas'),
                    apostas.length > 0 && e('button', {
                        onClick: exportar,
                        className: 'w-full bg-blue-600 text-white font-bold py-4 rounded-lg'
                    }, 'ðŸ’¾ Exportar')
                )
            );
        }
    }
    
    const root = createRoot(document.getElementById('root'));
    root.render(e(App));
    </script>
</body>
</html>

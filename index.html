<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tavares e Agregados - Mega da Virada 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-green-900 via-green-800 to-emerald-900 min-h-screen p-4">
    <div id="root"></div>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <script type="text/babel">
    const { useState, useEffect } = React;
    
    const SENHA_ACESSO = '2025';
    const SENHA_ADMIN = 'admin2025';
    const VALOR_TOTAL_BOLAO = 810.00;
    
    const PARTICIPANTES_INICIAIS = [
        { id: 1, nome: "Sara Santana", cotas: 3, valorPago: 45.00, numeros: [] },
        { id: 2, nome: "Cida Regoso", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 3, nome: "Paulo & Mion", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 4, nome: "Bia Rowies", cotas: 1, valorPago: 15.00, numeros: [] },
        { id: 5, nome: "Carolzinha Bonitatibus", cotas: 1, valorPago: 15.00, numeros: [] },
        { id: 6, nome: "Cris Rowies", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 7, nome: "Malu Souto", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 8, nome: "Jose Vicente", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 9, nome: "Rosely Ber", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 10, nome: "Juliana Regoso", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 11, nome: "Julia Rowies", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 12, nome: "Cida Pires", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 13, nome: "Ju & Anna", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 14, nome: "Mariana Granha", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 15, nome: "Marcia Teixeira", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 16, nome: "Mariana & Marcellus", cotas: 4, valorPago: 60.00, numeros: [] },
        { id: 17, nome: "Ricardo Granha", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 18, nome: "Cecilia & S√©rgio", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 19, nome: "Adriana", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 20, nome: "Andr√© & Ju", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 21, nome: "Estela Souto", cotas: 4, valorPago: 60.00, numeros: [] },
        { id: 22, nome: "Fatima", cotas: 1, valorPago: 15.00, numeros: [] },
        { id: 23, nome: "Leticia", cotas: 2, valorPago: 30.00, numeros: [] },
        { id: 24, nome: "Marcus e Gabs", cotas: 4, valorPago: 60.00, numeros: [] },
        { id: 25, nome: "Alana e Pedro", cotas: 2, valorPago: 30.00, numeros: [] },
    ];
    
    function App() {
        const [logado, setLogado] = useState(false);
        const [senhaInput, setSenhaInput] = useState('');
        const [pagina, setPagina] = useState('home');
        const [participantes, setParticipantes] = useState([]);
        const [participanteSelecionado, setParticipanteSelecionado] = useState(null);
        const [numerosEscolhidos, setNumerosEscolhidos] = useState([]);
        const [estrategia, setEstrategia] = useState('hibrida-b');
        const [apostas, setApostas] = useState([]);
        const [autenticadoAdmin, setAutenticadoAdmin] = useState(false);
        const [senhaAdmin, setSenhaAdmin] = useState('');
        const [aprovacoes, setAprovacoes] = useState([]);
        const [nomeAprovacao, setNomeAprovacao] = useState('');
        
        useEffect(() => {
            const salvos = localStorage.getItem('tavaresbolao2025');
            if (salvos) {
                setParticipantes(JSON.parse(salvos));
            } else {
                setParticipantes(PARTICIPANTES_INICIAIS);
            }
            
            const apostaSalvas = localStorage.getItem('tavaresApostas2025');
            if (apostaSalvas) setApostas(JSON.parse(apostaSalvas));
            
            const estrategiaSalva = localStorage.getItem('tavaresEstrategia2025');
            if (estrategiaSalva) setEstrategia(estrategiaSalva);
            
            const aprovSalvas = localStorage.getItem('tavaresAprovacoes2025');
            if (aprovSalvas) setAprovacoes(JSON.parse(aprovSalvas));
        }, []);
        
        const fazerLogin = () => {
            if (senhaInput === SENHA_ACESSO) {
                setLogado(true);
            } else {
                alert('Senha incorreta!');
            }
        };
        
        const abrirEscolhaNumeros = (participante) => {
            setParticipanteSelecionado(participante);
            setNumerosEscolhidos(participante.numeros || []);
        };
        
        const salvarNumeros = () => {
            if (numerosEscolhidos.length === 0) return alert('Escolha pelo menos 1 n√∫mero!');
            
            const novos = participantes.map(p => 
                p.id === participanteSelecionado.id ? {...p, numeros: numerosEscolhidos} : p
            );
            
            setParticipantes(novos);
            localStorage.setItem('tavaresbolao2025', JSON.stringify(novos));
            alert(`N√∫meros salvos! ‚úÖ`);
            setParticipanteSelecionado(null);
            setNumerosEscolhidos([]);
        };
        
        const toggleNumero = (num) => {
            if (numerosEscolhidos.includes(num)) {
                setNumerosEscolhidos(numerosEscolhidos.filter(n => n !== num));
            } else if (numerosEscolhidos.length < 6) {
                setNumerosEscolhidos([...numerosEscolhidos, num].sort((a,b) => a-b));
            }
        };
        
        const todosNumeros = () => {
            const nums = [];
            participantes.forEach(p => p.numeros && nums.push(...p.numeros));
            return [...new Set(nums)].sort((a,b) => a-b);
        };
        
        const gerarApostas = () => {
            const pool = todosNumeros();
            if (pool.length < 6) return alert('M√≠nimo 6 n√∫meros!');
            
            const resultado = [];
            const sortear = (qt) => {
                const nums = [];
                const temp = [...pool];
                while (nums.length < qt && temp.length > 0) {
                    const i = Math.floor(Math.random() * temp.length);
                    nums.push(temp[i]);
                    temp.splice(i, 1);
                }
                while (nums.length < qt) {
                    const n = Math.floor(Math.random() * 60) + 1;
                    if (!nums.includes(n)) nums.push(n);
                }
                return nums.sort((a,b) => a-b);
            };
            
            if (estrategia === 'hibrida-a') {
                resultado.push({tipo: '9 n√∫meros', nums: sortear(9), custo: 252});
                resultado.push({tipo: '7 n√∫meros', nums: sortear(7), custo: 35});
                resultado.push({tipo: '7 n√∫meros', nums: sortear(7), custo: 35});
                for (let i=0; i<10; i++) resultado.push({tipo: '6 n√∫meros', nums: sortear(6), custo: 5});
            } else if (estrategia === 'hibrida-b') {
                resultado.push({tipo: '9 n√∫meros', nums: sortear(9), custo: 252});
                for (let i=0; i<5; i++) resultado.push({tipo: '7 n√∫meros', nums: sortear(7), custo: 35});
                for (let i=0; i<16; i++) resultado.push({tipo: '6 n√∫meros', nums: sortear(6), custo: 5});
            }
            
            setApostas(resultado);
            localStorage.setItem('tavaresApostas2025', JSON.stringify(resultado));
            localStorage.setItem('tavaresEstrategia2025', estrategia);
            alert('Apostas geradas! ‚úÖ');
        };
        
        const aprovar = () => {
            if (!nomeAprovacao.trim()) return alert('Digite seu nome!');
            if (aprovacoes.includes(nomeAprovacao.trim())) return alert('Voc√™ j√° aprovou!');
            
            const novas = [...aprovacoes, nomeAprovacao.trim()];
            setAprovacoes(novas);
            localStorage.setItem('tavaresAprovacoes2025', JSON.stringify(novas));
            setNomeAprovacao('');
            alert('Aprova√ß√£o registrada! ‚úÖ');
        };
        
        const exportar = () => {
            let txt = '‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n';
            txt += '  TAVARES E AGREGADOS - MEGA DA VIRADA 2025\n';
            txt += '‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n';
            txt += `VALOR TOTAL: R$ ${VALOR_TOTAL_BOLAO.toFixed(2)}\n`;
            txt += `ESTRAT√âGIA: ${estrategia.toUpperCase()}\n\n`;
            txt += 'PARTICIPANTES:\n';
            participantes.forEach((p, i) => {
                txt += `${String(i+1).padStart(2, '0')}. ${p.nome} | ${p.cotas} cota(s) | R$ ${p.valorPago.toFixed(2)}\n`;
                txt += `    N√∫meros: ${p.numeros?.length > 0 ? p.numeros.join(', ') : 'N√£o escolheu'}\n`;
            });
            txt += '\nAPOSTAS:\n';
            apostas.forEach((a, i) => {
                txt += `${String(i+1).padStart(3, '0')}. [${a.tipo}] ${a.nums.map(n => String(n).padStart(2,'0')).join('-')}\n`;
            });
            
            const blob = new Blob([txt], {type: 'text/plain;charset=utf-8'});
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'tavares-mega-2025.txt';
            link.click();
        };
        
        if (!logado) {
            return (
                <div className="max-w-md mx-auto mt-20">
                    <div className="bg-white rounded-xl p-8 shadow-2xl">
                        <div className="text-center mb-6">
                            <div className="text-6xl mb-4">üé∞</div>
                            <h1 className="text-2xl font-bold text-green-900 mb-1">Tavares e Agregados</h1>
                            <h2 className="text-xl font-bold text-green-700 mb-2">Mega da Virada 2025</h2>
                        </div>
                        <div className="mb-6">
                            <label className="block font-bold mb-2">Senha:</label>
                            <input 
                                type="password"
                                value={senhaInput}
                                onChange={e => setSenhaInput(e.target.value)}
                                onKeyPress={e => e.key === 'Enter' && fazerLogin()}
                                placeholder="Digite a senha"
                                className="w-full p-4 border-2 rounded-lg text-lg focus:border-green-600 outline-none"
                            />
                        </div>
                        <button onClick={fazerLogin} className="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-4 rounded-lg text-lg">
                            üîì Entrar
                        </button>
                    </div>
                </div>
            );
        }
        
        if (participanteSelecionado) {
            return (
                <div className="max-w-4xl mx-auto">
                    <button onClick={() => {setParticipanteSelecionado(null); setNumerosEscolhidos([]);}} className="text-white mb-4">‚¨ÖÔ∏è Voltar</button>
                    <div className="bg-white rounded-xl p-6">
                        <h2 className="text-2xl font-bold text-green-900 mb-1 text-center">{participanteSelecionado.nome}</h2>
                        <p className="text-center text-gray-600 mb-6">{participanteSelecionado.cotas} cota(s) ‚Ä¢ R$ {participanteSelecionado.valorPago.toFixed(2)}</p>
                        <div className="mb-6">
                            <label className="block font-bold mb-2">Escolha at√© 6 n√∫meros: <span className="text-green-600">{numerosEscolhidos.length}/6</span></label>
                            {numerosEscolhidos.length > 0 && (
                                <div className="mb-3 flex gap-2 flex-wrap">
                                    {numerosEscolhidos.map(n => (
                                        <span key={n} className="bg-green-600 text-white px-4 py-2 rounded-full font-bold">{String(n).padStart(2, '0')}</span>
                                    ))}
                                </div>
                            )}
                            <div className="grid grid-cols-10 gap-2">
                                {Array.from({length: 60}, (_, i) => i+1).map(num => (
                                    <button key={num} onClick={() => toggleNumero(num)}
                                        className={`aspect-square rounded-lg font-bold transition ${
                                            numerosEscolhidos.includes(num) ? 'bg-green-600 text-white scale-110' : 'bg-gray-100 hover:bg-gray-200'
                                        }`}>
                                        {num}
                                    </button>
                                ))}
                            </div>
                        </div>
                        <button onClick={salvarNumeros} disabled={numerosEscolhidos.length === 0}
                            className="w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white font-bold py-4 rounded-lg">
                            ‚úÖ Salvar
                        </button>
                    </div>
                </div>
            );
        }
        
        if (pagina === 'home') {
            const totalComNumeros = participantes.filter(p => p.numeros?.length > 0).length;
            return (
                <div className="max-w-6xl mx-auto">
                    <div className="text-center mb-6 text-white">
                        <h1 className="text-4xl font-bold mb-2">üé∞ Tavares e Agregados üé∞</h1>
                        <h2 className="text-2xl font-bold mb-3">Mega da Virada 2025</h2>
                        <div className="inline-block bg-yellow-400 text-green-900 px-6 py-3 rounded-full font-bold text-xl">
                            R$ {VALOR_TOTAL_BOLAO.toFixed(2)}
                        </div>
                    </div>
                    
                    <div className="grid md:grid-cols-3 gap-4 mb-6">
                        <div className="bg-white rounded-lg p-4 text-center">
                            <p className="text-3xl font-bold text-green-900">{participantes.length}</p>
                            <p className="text-sm">Participantes</p>
                        </div>
                        <div className="bg-white rounded-lg p-4 text-center">
                            <p className="text-3xl font-bold text-blue-900">{totalComNumeros}/{participantes.length}</p>
                            <p className="text-sm">Escolheram</p>
                        </div>
                        <div className="bg-white rounded-lg p-4 text-center">
                            <p className="text-3xl font-bold text-purple-900">{apostas.length}</p>
                            <p className="text-sm">Jogos</p>
                        </div>
                    </div>
                    
                    <div className="bg-white rounded-xl p-6 mb-6">
                        <h3 className="text-2xl font-bold mb-4">üë• Participantes</h3>
                        <div className="grid md:grid-cols-2 gap-3 max-h-96 overflow-y-auto">
                            {participantes.map(p => (
                                <div key={p.id} className="border-2 border-green-200 rounded-lg p-4 bg-green-50">
                                    <div className="flex justify-between items-start mb-3">
                                        <div className="flex-1">
                                            <h4 className="font-bold text-lg">{p.nome}</h4>
                                            <p className="text-sm text-gray-600">{p.cotas} cota(s) ‚Ä¢ R$ {p.valorPago.toFixed(2)}</p>
                                        </div>
                                        <button onClick={() => abrirEscolhaNumeros(p)}
                                            className="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-bold text-sm ml-2">
                                            {p.numeros?.length > 0 ? '‚úèÔ∏è' : '‚ûï'}
                                        </button>
                                    </div>
                                    {p.numeros?.length > 0 ? (
                                        <div className="flex gap-1 flex-wrap">
                                            {p.numeros.map(n => (
                                                <span key={n} className="bg-green-600 text-white w-8 h-8 flex items-center justify-center rounded-full text-xs font-bold">
                                                    {String(n).padStart(2, '0')}
                                                </span>
                                            ))}
                                        </div>
                                    ) : (
                                        <p className="text-sm text-gray-500 italic">Aguardando</p>
                                    )}
                                </div>
                            ))}
                        </div>
                    </div>
                    
                    <div className="grid md:grid-cols-2 gap-4">
                        <button onClick={() => setPagina('consulta')} className="bg-white rounded-xl p-6 shadow-xl">
                            <div className="text-5xl mb-3">üé∞</div>
                            <h3 className="text-xl font-bold text-blue-900">Ver Jogos</h3>
                        </button>
                        <button onClick={() => setPagina('admin')} className="bg-white rounded-xl p-6 shadow-xl">
                            <div className="text-5xl mb-3">üîê</div>
                            <h3 className="text-xl font-bold text-purple-900">Admin</h3>
                        </button>
                    </div>
                </div>
            );
        }
        
        if (pagina === 'consulta') {
            return (
                <div className="max-w-6xl mx-auto">
                    <button onClick={() => setPagina('home')} className="text-white mb-4">‚¨ÖÔ∏è Voltar</button>
                    <div className="bg-white rounded-xl p-6">
                        <h2 className="text-3xl font-bold text-center mb-6">üé∞ Jogos</h2>
                        {apostas.length === 0 ? (
                            <div className="text-center py-12">
                                <div className="text-6xl mb-4">‚è≥</div>
                                <h3 className="text-2xl font-bold">Aguardando</h3>
                            </div>
                        ) : (
                            <>
                                <div className="mb-6">
                                    <div className="grid md:grid-cols-3 gap-3 max-h-96 overflow-y-auto">
                                        {apostas.map((a, i) => (
                                            <div key={i} className="bg-green-50 border p-3 rounded-lg">
                                                <div className="flex justify-between text-xs mb-2">
                                                    <span>#{i+1}</span>
                                                    <span className="font-bold">{a.tipo}</span>
                                                </div>
                                                <div className="flex gap-1 flex-wrap justify-center">
                                                    {a.nums.map((n, j) => (
                                                        <span key={j} className="bg-green-600 text-white w-7 h-7 flex items-center justify-center rounded-full text-xs font-bold">
                                                            {String(n).padStart(2, '0')}
                                                        </span>
                                                    ))}
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                                <div className="bg-green-50 border-2 border-green-300 rounded-lg p-6">
                                    <h3 className="font-bold text-xl mb-4 text-center">‚úÖ Aprovar</h3>
                                    {aprovacoes.length > 0 && (
                                        <div className="mb-4">
                                            <p className="font-bold mb-2">Aprovaram ({aprovacoes.length}):</p>
                                            <div className="flex flex-wrap gap-2">
                                                {aprovacoes.map((a, i) => (
                                                    <span key={i} className="bg-green-600 text-white px-3 py-1 rounded-full text-sm">{a} ‚úÖ</span>
                                                ))}
                                            </div>
                                        </div>
                                    )}
                                    <div className="flex gap-2">
                                        <input type="text" value={nomeAprovacao} onChange={e => setNomeAprovacao(e.target.value)}
                                            placeholder="Seu nome" className="flex-1 p-3 border-2 rounded-lg" />
                                        <button onClick={aprovar} className="bg-green-600 text-white px-6 py-3 rounded-lg font-bold">‚úÖ</button>
                                    </div>
                                </div>
                            </>
                        )}
                    </div>
                </div>
            );
        }
        
        if (pagina === 'admin') {
            if (!autenticadoAdmin) {
                return (
                    <div className="max-w-md mx-auto">
                        <button onClick={() => setPagina('home')} className="text-white mb-4">‚¨ÖÔ∏è Voltar</button>
                        <div className="bg-white rounded-xl p-8">
                            <div className="text-6xl mb-4 text-center">üîê</div>
                            <input type="password" value={senhaAdmin} onChange={e => setSenhaAdmin(e.target.value)}
                                placeholder="Senha admin" className="w-full p-3 border-2 rounded-lg mb-4" />
                            <button onClick={() => senhaAdmin === SENHA_ADMIN ? setAutenticadoAdmin(true) : alert('Incorreta!')}
                                className="w-full bg-purple-600 text-white font-bold py-3 rounded-lg">Entrar</button>
                        </div>
                    </div>
                );
            }
            
            return (
                <div className="max-w-6xl mx-auto">
                    <button onClick={() => {setAutenticadoAdmin(false); setPagina('home');}} className="text-white mb-4">‚¨ÖÔ∏è Sair</button>
                    <div className="bg-white rounded-xl p-6">
                        <h2 className="text-3xl font-bold mb-6">üîê Admin</h2>
                        <div className="mb-6">
                            <h3 className="font-bold mb-3">Estrat√©gia:</h3>
                            <div className="grid md:grid-cols-2 gap-4">
                                {['hibrida-a', 'hibrida-b'].map(e => (
                                    <button key={e} onClick={() => setEstrategia(e)}
                                        className={`p-4 border-2 rounded-lg ${estrategia === e ? 'border-purple-600 bg-purple-50' : 'border-gray-300'}`}>
                                        <h4 className="font-bold">{e.toUpperCase().replace('-', ' ')}</h4>
                                    </button>
                                ))}
                            </div>
                        </div>
                        <button onClick={gerarApostas} disabled={todosNumeros().length < 6}
                            className="w-full bg-purple-600 text-white font-bold py-4 rounded-lg mb-4 disabled:bg-gray-400">
                            ‚ú® Gerar Apostas
                        </button>
                        {apostas.length > 0 && (
                            <button onClick={exportar} className="w-full bg-blue-600 text-white font-bold py-4 rounded-lg">
                                üíæ Exportar
                            </button>
                        )}
                    </div>
                </div>
            );
        }
    }
    
    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
